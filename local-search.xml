<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>NOI-é«˜ç²¾åº¦è¿ç®—</title>
    <link href="/2019/10/04/NOI-%E9%AB%98%E7%B2%BE%E5%BA%A6%E8%BF%90%E7%AE%97/"/>
    <url>/2019/10/04/NOI-%E9%AB%98%E7%B2%BE%E5%BA%A6%E8%BF%90%E7%AE%97/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><p>æœ¬æ–‡å°†åˆ†äº«NOIä¸­å¸¸è§çš„å‡ ç§é«˜ç²¾åº¦ç®—æ³•</p><h2 id="ç®€ä»‹"><a class="markdownIt-Anchor" href="#ç®€ä»‹"></a> ç®€ä»‹</h2><blockquote><p>é«˜ç²¾åº¦è®¡ç®—æ˜¯ä¸€ç§ç¨‹åºè®¾è®¡çš„ç®—æ³•ã€‚ç”±äºä¸­å¤®å¤„ç†å™¨çš„å­—é•¿é™åˆ¶ï¼Œå¦‚32ä½CPUä¸­ä¸€ä¸ªæ•´æ•°æœ€å¤§åªèƒ½å–å€¼4,294,967,295ã€‚å› æ­¤åœ¨è¿›è¡Œæ›´å¤§èŒƒå›´çš„æ•°å€¼è®¡ç®—ä¸­ï¼Œå¾€å¾€è¦é‡‡å–æ¨¡æ‹Ÿæ‰‹æ®µã€‚é€šå¸¸é€šè¿‡åˆ†ç¦»å­—ç¬¦çš„æ–¹æ³•é€šè¿‡æ•°å­—æ•°ç»„è¿›è¡Œè¾“å…¥ã€‚é€šè¿‡æ•°ç»„å€’åºè¾“å‡ºã€‚é€šè¿‡æ¨¡æ‹Ÿç«–å¼è®¡ç®—è¿›è¡Œè®¡ç®—ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä¸»è¦æ¨¡æ‹Ÿçš„æ˜¯æŒ‰ä½è¿ç®—ï¼Œå¯ä»¥ç”¨ä¸åŒçš„è¿›ä½åˆ¶è¾¾æˆä¸åŒçš„ç›®çš„ã€‚</p><p><em>â€”â€”Wikipedia</em></p></blockquote><h2 id="åŠ æ³•"><a class="markdownIt-Anchor" href="#åŠ æ³•"></a> åŠ æ³•</h2><pre class="highlight"><code class="cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">char</span> c;    <span class="hljs-keyword">int</span> tmp[<span class="hljs-number">101</span>] = {};    <span class="hljs-keyword">while</span> ((c = <span class="hljs-built_in">cin</span>.get()) != <span class="hljs-string">'\n'</span>)    {        tmp[<span class="hljs-number">0</span>]++;        tmp[tmp[<span class="hljs-number">0</span>]] = c - <span class="hljs-string">'0'</span>;    }    arr[<span class="hljs-number">0</span>] = tmp[<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = tmp[<span class="hljs-number">0</span>]; i &gt;= <span class="hljs-number">1</span>; i--)    {        arr[tmp[<span class="hljs-number">0</span>] - i + <span class="hljs-number">1</span>] = tmp[i]; <span class="hljs-comment">// å€’åºå­˜å…¥</span>    }}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a[],<span class="hljs-keyword">int</span> b[],<span class="hljs-keyword">int</span> c[])</span></span>{    <span class="hljs-keyword">int</span> maxLen, x = <span class="hljs-number">0</span>; <span class="hljs-comment">// maxLenå³å¯èƒ½çš„æœ€å¤§é•¿åº¦, xå³å‘æ›´é«˜ä¸€ä½çš„è¿›ä½</span>    <span class="hljs-keyword">if</span> (a[<span class="hljs-number">0</span>] &gt;= b[<span class="hljs-number">0</span>])    {        maxLen = a[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>;    }    <span class="hljs-keyword">else</span>    {        maxLen = b[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>;    }    c[<span class="hljs-number">0</span>] = maxLen;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= maxLen; i++) <span class="hljs-comment">// ä¸€ä½ä¸€ä½å‘é«˜ä½è®¡ç®—</span>    {        c[i] = a[i] + b[i] + x;        <span class="hljs-keyword">if</span> (c[i] &gt;= <span class="hljs-number">10</span>)        {            x = c[i] / <span class="hljs-number">10</span>;            c[i] -= <span class="hljs-number">10</span>;        }    }    <span class="hljs-keyword">if</span> (c[maxLen] == <span class="hljs-number">0</span>) <span class="hljs-comment">// è‹¥æœ€é«˜ä½ä¸º0åˆ™èˆå»æœ€é«˜ä½</span>    {        c[<span class="hljs-number">0</span>]--;    }}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">output</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = arr[<span class="hljs-number">0</span>]; i &gt;= <span class="hljs-number">1</span>; i--)    {        <span class="hljs-built_in">cout</span> &lt;&lt; arr[i]; <span class="hljs-comment">// å€’åºè¾“å‡º</span>    }    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">int</span> a[<span class="hljs-number">101</span>] = {}, b[<span class="hljs-number">101</span>] = {}, c[<span class="hljs-number">101</span>] = {};    input(a);    input(b);    sum(a, b, c);    output(c);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;}</code></pre><h2 id="å‡æ³•"><a class="markdownIt-Anchor" href="#å‡æ³•"></a> å‡æ³•</h2><pre class="highlight"><code class="cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">char</span> c;    <span class="hljs-keyword">int</span> tmp[<span class="hljs-number">101</span>] = {};    <span class="hljs-keyword">while</span> ((c = <span class="hljs-built_in">cin</span>.get()) != <span class="hljs-string">'\n'</span>)    {        tmp[<span class="hljs-number">0</span>]++;        tmp[tmp[<span class="hljs-number">0</span>]] = c - <span class="hljs-string">'0'</span>;    }    arr[<span class="hljs-number">0</span>] = tmp[<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = tmp[<span class="hljs-number">0</span>]; i &gt;= <span class="hljs-number">1</span>; i--)    {        arr[tmp[<span class="hljs-number">0</span>] - i + <span class="hljs-number">1</span>] = tmp[i];    }}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sub</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a[],<span class="hljs-keyword">int</span> b[],<span class="hljs-keyword">int</span> c[])</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= a[<span class="hljs-number">0</span>]; i++)    {        c[i] = a[i] - b[i];        <span class="hljs-keyword">if</span> (c[i] &lt; <span class="hljs-number">0</span>)        {            a[i + <span class="hljs-number">1</span>]--;            c[i] += <span class="hljs-number">10</span>;        }    }    c[<span class="hljs-number">0</span>] = a[<span class="hljs-number">0</span>];    <span class="hljs-keyword">while</span> (c[c[<span class="hljs-number">0</span>]] == <span class="hljs-number">0</span>)    {        c[<span class="hljs-number">0</span>]--;    }}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">output</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = arr[<span class="hljs-number">0</span>]; i &gt;= <span class="hljs-number">1</span>; i--)    {        <span class="hljs-built_in">cout</span> &lt;&lt; arr[i];    }    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">int</span> a[<span class="hljs-number">101</span>] = {}, b[<span class="hljs-number">101</span>] = {}, c[<span class="hljs-number">101</span>] = {};    input(a);    input(b);    sub(a, b, c); <span class="hljs-comment">// é»˜è®¤a-bå¤§äº0</span>    output(c);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;}</code></pre><h2 id="ä¹˜æ³•"><a class="markdownIt-Anchor" href="#ä¹˜æ³•"></a> ä¹˜æ³•</h2><p><img src="https://i.loli.net/2019/08/08/YPBSGXnL7bHDNid.jpg" srcset="/img/loading.gif" alt="ä¹˜æ³•.jpg" /></p><pre class="highlight"><code class="cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">char</span> c;    <span class="hljs-keyword">int</span> tmp[<span class="hljs-number">101</span>] = {};    <span class="hljs-keyword">while</span> ((c = <span class="hljs-built_in">cin</span>.get()) != <span class="hljs-string">'\n'</span>)    {        tmp[<span class="hljs-number">0</span>]++;        tmp[tmp[<span class="hljs-number">0</span>]] = c - <span class="hljs-string">'0'</span>;    }    arr[<span class="hljs-number">0</span>] = tmp[<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = tmp[<span class="hljs-number">0</span>]; i &gt;= <span class="hljs-number">1</span>; i--)    {        arr[tmp[<span class="hljs-number">0</span>] - i + <span class="hljs-number">1</span>] = tmp[i];    }}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">mul</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a[],<span class="hljs-keyword">int</span> b[],<span class="hljs-keyword">int</span> c[])</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> indexB = <span class="hljs-number">1</span>; indexB &lt;= b[<span class="hljs-number">0</span>]; indexB++)    {        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> indexA = <span class="hljs-number">1</span>; indexA &lt;= a[<span class="hljs-number">0</span>]; indexA++)        {            c[indexA + indexB - <span class="hljs-number">1</span>] += a[indexA] * b[indexB];            <span class="hljs-keyword">if</span> (c[indexA + indexB - <span class="hljs-number">1</span>] &gt;= <span class="hljs-number">10</span>)            {                c[indexA + indexB - <span class="hljs-number">1</span> + <span class="hljs-number">1</span>] += c[indexA + indexB - <span class="hljs-number">1</span>] / <span class="hljs-number">10</span>;                c[indexA + indexB - <span class="hljs-number">1</span>] %= <span class="hljs-number">10</span>;            }        }    }    c[<span class="hljs-number">0</span>] = a[<span class="hljs-number">0</span>] + b[<span class="hljs-number">0</span>];    <span class="hljs-keyword">while</span> (c[c[<span class="hljs-number">0</span>]] == <span class="hljs-number">0</span>)    {        c[<span class="hljs-number">0</span>]--;    }}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">output</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = arr[<span class="hljs-number">0</span>]; i &gt;= <span class="hljs-number">1</span>; i--)    {        <span class="hljs-built_in">cout</span> &lt;&lt; arr[i];    }    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">int</span> a[<span class="hljs-number">101</span>] = {}, b[<span class="hljs-number">101</span>] = {}, c[<span class="hljs-number">201</span>] = {};    input(a);    input(b);    mul(a, b, c);    output(c);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;}</code></pre>]]></content>
    
    
    <categories>
      
      <category>NOI</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é«˜ç²¾åº¦è¿ç®—</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•™ç¨‹-Bilibiliå¼¹å¹•è½¬ASSå­—å¹•</title>
    <link href="/2019/09/14/%E6%95%99%E7%A8%8B-Bilibili%E5%BC%B9%E5%B9%95%E8%BD%ACASS%E5%AD%97%E5%B9%95/"/>
    <url>/2019/09/14/%E6%95%99%E7%A8%8B-Bilibili%E5%BC%B9%E5%B9%95%E8%BD%ACASS%E5%AD%97%E5%B9%95/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><p>æœ¬æ–‡å°†ä»‹ç»Bilibiliçš„å¼¹å¹•æœºåˆ¶ä¸å°†å¼¹å¹•è½¬æ¢ä¸ºASSå­—å¹•çš„æ–¹æ³•</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/DreamWalkerXZ/BilibiliDanmu2Ass" target="_blank" rel="noopener">ğŸš€Github</a></p><h2 id="bilibiliçš„å¼¹å¹•æœºåˆ¶"><a class="markdownIt-Anchor" href="#bilibiliçš„å¼¹å¹•æœºåˆ¶"></a> Bilibiliçš„å¼¹å¹•æœºåˆ¶</h2><h3 id="è·å–å¼¹å¹•"><a class="markdownIt-Anchor" href="#è·å–å¼¹å¹•"></a> è·å–å¼¹å¹•</h3><p>Bilibiliçš„å¼¹å¹•å‚¨å­˜äº<a href="https://comment.bilibili.com/%E8%A7%86%E9%A2%91%E7%9A%84cid.xml" target="_blank" rel="noopener">https://comment.bilibili.com/è§†é¢‘çš„cid.xml</a></p><p>åœ¨Bilibiliä¸Šï¼Œæ¯ä¸ªè§†é¢‘æ‹¥æœ‰è‡ªå·±çš„avç¼–å·å³æ‰€è°“aidï¼Œè€Œå¦‚æœæ˜¯åˆé›†çš„è§†é¢‘å…¶aidä¼šé‡åˆï¼Œä¸ä¾¿äºåŒºåˆ†ï¼Œæ‰€ä»¥Bilibiliä¸ºæ¯ä¸ªè§†é¢‘ï¼ˆåŒ…æ‹¬åˆé›†ä¸­çš„åˆ†è§†é¢‘ï¼‰åˆ›å»ºäº†å…¶ç‹¬æœ‰çš„cid</p><p>è‡³äºcidå¦‚ä½•è·å–ï¼Œåªéœ€è¦åœ¨è§†é¢‘æ’­æ”¾é¡µé¢çš„æºä»£ç ä¸­ï¼Œæ‰¾åˆ°cidå­—æ®µåé¢çš„å€¼å³å¯</p><p><img src="https://i.loli.net/2019/08/20/nTHWOoVUJkRw148.png" srcset="/img/loading.gif" alt="getCidBrowser.png" /></p><pre class="highlight"><code class="python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_cid</span><span class="hljs-params">(url)</span>:</span>    headers = {<span class="hljs-string">"user-agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.87 Safari/537.36"</span>}    html = requests.get(url, headers = headers).content.decode(<span class="hljs-string">'utf-8'</span>)    <span class="hljs-keyword">if</span> <span class="hljs-string">"cid"</span> <span class="hljs-keyword">in</span> html:        <span class="hljs-keyword">return</span> re.search(<span class="hljs-string">r'"cid":(\d*)'</span>, html).group(<span class="hljs-number">1</span>)    <span class="hljs-keyword">else</span>:        <span class="hljs-keyword">return</span> <span class="hljs-string">"x"</span></code></pre><h3 id="å¼¹å¹•æ ¼å¼"><a class="markdownIt-Anchor" href="#å¼¹å¹•æ ¼å¼"></a> å¼¹å¹•æ ¼å¼</h3><p><img src="https://i.loli.net/2019/08/20/IZuCMF2jaf7hXH3.png" srcset="/img/loading.gif" alt="Danmu_XML.png" /></p><p>æˆ‘ä»¬æŠŠè¿™ä¸€æ¡å¼¹å¹•å†æŠ½è±¡ä¸€ä¸‹ï¼Œä¹Ÿå°±æ˜¯ï¼š</p><pre class="highlight"><code class="python">danmu = <span class="hljs-string">'&lt;d p="å¼¹å¹•å‡ºç°çš„æ—¶é—´,å¼¹å¹•çš„æ¨¡å¼,å¼¹å¹•çš„å­—ä½“å¤§å°,å¼¹å¹•çš„é¢œè‰²,Unixæ—¶é—´æˆ³,å¼¹å¹•æ± ,å¼¹å¹•å‘é€è€…çš„ID,å¼¹å¹•åœ¨å¼¹å¹•æ•°æ®åº“ä¸­çš„rowID"&gt;å¼¹å¹•çš„å†…å®¹&lt;/d&gt;'</span></code></pre><ul><li>å¼¹å¹•å‡ºç°çš„æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½</li><li>å¼¹å¹•çš„æ¨¡å¼ï¼š1ï½3 æ»šåŠ¨å¼¹å¹• 4 åº•ç«¯å¼¹å¹• 5 é¡¶ç«¯å¼¹å¹• 6 é€†å‘å¼¹å¹• 7 ç²¾å‡†å®šä½ 8 é«˜çº§å¼¹å¹•</li><li>å¼¹å¹•çš„å­—ä½“å¤§å°ï¼š12 éå¸¸å° 16 ç‰¹å° 18 å° 25 ä¸­ 36 å¤§ 45 å¾ˆå¤§ 64 ç‰¹åˆ«å¤§</li><li>å¼¹å¹•çš„é¢œè‰²ï¼šå°† HTML å…­ä½åå…­è¿›åˆ¶é¢œè‰²è½¬ä¸ºåè¿›åˆ¶è¡¨ç¤ºï¼Œä¾‹å¦‚ #FFFFFF ä¼šè¢«å­˜å‚¨ä¸º 16777215</li><li>Unix æ—¶é—´æˆ³ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ï¼ŒåŸºå‡†æ—¶é—´ä¸º 1970-1-1 08:00:00</li><li>å¼¹å¹•æ± ï¼š0 æ™®é€šæ±  1 å­—å¹•æ±  2 ç‰¹æ®Šæ± ï¼ˆæ³¨ï¼šç›®å‰ç‰¹æ®Šæ± ä¸ºé«˜çº§å¼¹å¹•ä¸“ç”¨ï¼‰</li><li>å¼¹å¹•å‘é€è€…çš„IDï¼Œç”¨äºã€å±è”½æ­¤å¼¹å¹•çš„å‘é€è€…ã€åŠŸèƒ½</li><li>å¼¹å¹•åœ¨å¼¹å¹•æ•°æ®åº“ä¸­çš„rowIDï¼Œç”¨äºã€å†å²å¼¹å¹•ã€åŠŸèƒ½</li></ul><blockquote><p>æ„Ÿè°¢**@å¼ ä¹¦æ¨µ**å¯¹å¼¹å¹•æ•°æ®æ ¼å¼çš„è§£æâ€”â€”<br /><em><a href="https://zhangshuqiao.org/2018-03/Bilibili%E5%BC%B9%E5%B9%95%E6%96%87%E4%BB%B6%E7%9A%84%E8%A7%A3%E6%9E%90/" target="_blank" rel="noopener">https://zhangshuqiao.org/2018-03/Bilibiliå¼¹å¹•æ–‡ä»¶çš„è§£æ/</a></em></p></blockquote><h2 id="å°†å¼¹å¹•è½¬æ¢ä¸ºasså­—å¹•"><a class="markdownIt-Anchor" href="#å°†å¼¹å¹•è½¬æ¢ä¸ºasså­—å¹•"></a> å°†å¼¹å¹•è½¬æ¢ä¸ºASSå­—å¹•</h2><h3 id="æ•°æ®ç»“æ„"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„"></a> æ•°æ®ç»“æ„</h3><p>è¦åˆ¶ä½œå­—å¹•çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦çš„æœ‰æ•ˆæ•°æ®æœ‰ï¼š<strong>å¼¹å¹•å‡ºç°çš„æ—¶é—´</strong>+<strong>å¼¹å¹•çš„æ¨¡å¼</strong>+<strong>å¼¹å¹•çš„é¢œè‰²</strong>+<strong>å¼¹å¹•çš„å†…å®¹</strong>ã€‚</p><pre class="highlight"><code class="python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Danmu</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, appear_time, disappear_time, mode, color, text)</span>:</span>        self.appear_time = appear_time        self.disappear_time = disappear_time        self.mode = mode        self.color = color        <span class="hljs-keyword">if</span> self.color == <span class="hljs-string">r"\c&amp;HFFFFFF"</span>: <span class="hljs-comment"># é»˜è®¤ç™½è‰²åˆ™åˆ å»,å‹ç¼©ç©ºé—´</span>            self.color = <span class="hljs-string">""</span>        self.text = text</code></pre><h3 id="æ•°æ®å¤„ç†å°è£…æ•°æ®"><a class="markdownIt-Anchor" href="#æ•°æ®å¤„ç†å°è£…æ•°æ®"></a> æ•°æ®å¤„ç†&amp;å°è£…æ•°æ®</h3><pre class="highlight"><code class="python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">format_time</span><span class="hljs-params">(time_raw)</span>:</span> <span class="hljs-comment"># æŠŠæ—¶é—´æ ¼å¼åŒ–ä¸ºASSå­—å¹•ä¸­çš„æ—¶é—´æ ¼å¼</span>    hour = str(int(time_raw / <span class="hljs-number">3600</span>))    <span class="hljs-keyword">if</span> hour != <span class="hljs-string">'0'</span>:        time_raw %= <span class="hljs-number">3600</span>    minute = str(int(time_raw / <span class="hljs-number">60</span>))    <span class="hljs-keyword">if</span> minute != <span class="hljs-string">'0'</span>:        time_raw %= <span class="hljs-number">60</span>    <span class="hljs-keyword">if</span> len(minute) == <span class="hljs-number">1</span>:        minute = <span class="hljs-string">"0"</span> + minute    second = str(round(time_raw, <span class="hljs-number">2</span>))    <span class="hljs-keyword">if</span> <span class="hljs-string">'.'</span> <span class="hljs-keyword">in</span> second:        <span class="hljs-keyword">if</span> len(second.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>]) == <span class="hljs-number">1</span>:            second = <span class="hljs-string">"0"</span> + second        <span class="hljs-keyword">if</span> len(second.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">1</span>]) == <span class="hljs-number">1</span>:            second = second + <span class="hljs-string">"0"</span>    <span class="hljs-keyword">else</span>:        <span class="hljs-keyword">if</span> len(second) == <span class="hljs-number">1</span>:            second = <span class="hljs-string">"0"</span> + second + <span class="hljs-string">".00"</span>        <span class="hljs-keyword">else</span>:            second = second + <span class="hljs-string">".00"</span>    <span class="hljs-keyword">return</span> hour + <span class="hljs-string">':'</span> + minute + <span class="hljs-string">':'</span> + second<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_danmu_list</span><span class="hljs-params">(danmu_url)</span>:</span>    danmu_raw = requests.get(danmu_url, headers = headers).content.decode(<span class="hljs-string">'utf-8'</span>)    danmu_raw_list = re.findall(<span class="hljs-string">r"&lt;d .*?&lt;/d&gt;"</span>, danmu_raw)    danmu_list = []    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> danmu_raw_list:        m = re.match(<span class="hljs-string">r'&lt;d p="(.*?),(.*?),(.*?),(.*?),(.*?)&gt;(.*?)&lt;/d&gt;'</span>, item) <span class="hljs-comment"># group(3)å’Œgroup(5)ä¸éœ€è¦</span>        danmu_list.append(Danmu(format_time(float(m.group(<span class="hljs-number">1</span>))), format_time(float(m.group(<span class="hljs-number">1</span>)) + <span class="hljs-number">8</span>), int(m.group(<span class="hljs-number">2</span>)), <span class="hljs-string">r"\c&amp;H"</span> + str(hex(int(m.group(<span class="hljs-number">4</span>))))[<span class="hljs-number">2</span>:].upper(), m.group(<span class="hljs-number">6</span>)))    <span class="hljs-keyword">return</span> danmu_list<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generate_ass</span><span class="hljs-params">(danmu_list)</span>:</span>    ass = <span class="hljs-string">"""[Script Info]Title: Bilibiliå¼¹å¹•è½¬ASSå­—å¹•Original Script: ç”± https://github.com/dreamwalkerxz åˆ¶ä½œScriptType: v4.00+Collisions: NormalPlayResX: 560PlayResY: 420Timer: 10.0000[V4+ Styles]Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, EncodingStyle: Fix,Microsoft YaHei UI,25,&amp;H66FFFFFF,&amp;H66FFFFFF,&amp;H66000000,&amp;H66000000,0,0,0,0,100,100,0,0,1,1,0,2,20,20,2,0Style: R2L,Microsoft YaHei UI,25,&amp;H66FFFFFF,&amp;H66FFFFFF,&amp;H66000000,&amp;H66000000,0,0,0,0,100,100,0,0,1,1,0,2,20,20,2,0[Events]Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text"""</span>    currentY = <span class="hljs-number">1</span> <span class="hljs-comment"># currentY * 25 -&gt; Y .. currentY = 1 -&gt; 16</span>    <span class="hljs-keyword">for</span> danmu <span class="hljs-keyword">in</span> danmu_list:        style = <span class="hljs-string">""</span>        startX = <span class="hljs-number">620</span> <span class="hljs-comment"># æ¥è¿‘äºå¹³å‡å€¼</span>        endX = -(startX - <span class="hljs-number">560</span>)        <span class="hljs-keyword">if</span> <span class="hljs-number">1</span> &lt;= danmu.mode <span class="hljs-keyword">and</span> danmu.mode &lt;= <span class="hljs-number">3</span>:            style = <span class="hljs-string">"R2L"</span>        <span class="hljs-keyword">else</span>:            style = <span class="hljs-string">"FIX"</span>            startX = <span class="hljs-number">280</span>            endX = <span class="hljs-number">280</span>        Y = currentY * <span class="hljs-number">25</span>        currentY += <span class="hljs-number">1</span>        <span class="hljs-keyword">if</span> currentY == <span class="hljs-number">17</span>:            currentY = <span class="hljs-number">1</span>        ass += <span class="hljs-string">"Dialogue: 0,%s,%s,%s,,20,20,2,,{\\move(%d,%d,%d,%d)%s}%s\n"</span> % (danmu.appear_time, danmu.disappear_time, style, startX, Y, endX, Y, danmu.color, danmu.text)    <span class="hljs-keyword">return</span> ass</code></pre><h2 id="æˆæœå±•ç¤º"><a class="markdownIt-Anchor" href="#æˆæœå±•ç¤º"></a> æˆæœå±•ç¤º</h2><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/DreamWalkerXZ/BilibiliDanmu2Ass" target="_blank" rel="noopener">ğŸš€Github</a></p><h3 id="ä¸»ç¨‹åº"><a class="markdownIt-Anchor" href="#ä¸»ç¨‹åº"></a> ä¸»ç¨‹åº</h3><pre class="highlight"><code class="python"><span class="hljs-keyword">import</span> requests<span class="hljs-keyword">import</span> reheaders = {<span class="hljs-string">"user-agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.87 Safari/537.36"</span>}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Danmu</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, appear_time, disappear_time, mode, color, text)</span>:</span>        self.appear_time = appear_time        self.disappear_time = disappear_time        self.mode = mode        self.color = color        <span class="hljs-keyword">if</span> self.color == <span class="hljs-string">r"\c&amp;HFFFFFF"</span>: <span class="hljs-comment"># é»˜è®¤ç™½è‰²åˆ™åˆ å»,å‹ç¼©ç©ºé—´</span>            self.color = <span class="hljs-string">""</span>        self.text = text<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_cid</span><span class="hljs-params">(url)</span>:</span>    html = requests.get(url, headers = headers).content.decode(<span class="hljs-string">'utf-8'</span>)    <span class="hljs-keyword">if</span> <span class="hljs-string">"cid"</span> <span class="hljs-keyword">in</span> html:        <span class="hljs-keyword">return</span> re.search(<span class="hljs-string">r'"cid":(\d*)'</span>, html).group(<span class="hljs-number">1</span>)    <span class="hljs-keyword">else</span>:        <span class="hljs-keyword">return</span> <span class="hljs-string">"x"</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">format_time</span><span class="hljs-params">(time_raw)</span>:</span>    hour = str(int(time_raw / <span class="hljs-number">3600</span>))    <span class="hljs-keyword">if</span> hour != <span class="hljs-string">'0'</span>:        time_raw %= <span class="hljs-number">3600</span>    minute = str(int(time_raw / <span class="hljs-number">60</span>))    <span class="hljs-keyword">if</span> minute != <span class="hljs-string">'0'</span>:        time_raw %= <span class="hljs-number">60</span>    <span class="hljs-keyword">if</span> len(minute) == <span class="hljs-number">1</span>:        minute = <span class="hljs-string">"0"</span> + minute    second = str(round(time_raw, <span class="hljs-number">2</span>))    <span class="hljs-keyword">if</span> <span class="hljs-string">'.'</span> <span class="hljs-keyword">in</span> second:        <span class="hljs-keyword">if</span> len(second.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>]) == <span class="hljs-number">1</span>:            second = <span class="hljs-string">"0"</span> + second        <span class="hljs-keyword">if</span> len(second.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">1</span>]) == <span class="hljs-number">1</span>:            second = second + <span class="hljs-string">"0"</span>    <span class="hljs-keyword">else</span>:        <span class="hljs-keyword">if</span> len(second) == <span class="hljs-number">1</span>:            second = <span class="hljs-string">"0"</span> + second + <span class="hljs-string">".00"</span>        <span class="hljs-keyword">else</span>:            second = second + <span class="hljs-string">".00"</span>    <span class="hljs-keyword">return</span> hour + <span class="hljs-string">':'</span> + minute + <span class="hljs-string">':'</span> + second<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_danmu_list</span><span class="hljs-params">(danmu_url)</span>:</span>    danmu_raw = requests.get(danmu_url, headers = headers).content.decode(<span class="hljs-string">'utf-8'</span>)    danmu_raw_list = re.findall(<span class="hljs-string">r"&lt;d .*?&lt;/d&gt;"</span>, danmu_raw)    danmu_list = []    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> danmu_raw_list:        m = re.match(<span class="hljs-string">r'&lt;d p="(.*?),(.*?),(.*?),(.*?),(.*?)&gt;(.*?)&lt;/d&gt;'</span>, item) <span class="hljs-comment"># group(3å’Œ5)åºŸå¼ƒ</span>        danmu_list.append(Danmu(format_time(float(m.group(<span class="hljs-number">1</span>))), format_time(float(m.group(<span class="hljs-number">1</span>)) + <span class="hljs-number">8</span>), int(m.group(<span class="hljs-number">2</span>)), <span class="hljs-string">r"\c&amp;H"</span> + str(hex(int(m.group(<span class="hljs-number">4</span>))))[<span class="hljs-number">2</span>:].upper(), m.group(<span class="hljs-number">6</span>)))    <span class="hljs-keyword">return</span> danmu_list<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generate_ass</span><span class="hljs-params">(danmu_list)</span>:</span>    ass = <span class="hljs-string">"""[Script Info]Title: Bilibiliå¼¹å¹•è½¬ASSå­—å¹•Original Script: ç”± https://github.com/dreamwalkerxz åˆ¶ä½œScriptType: v4.00+Collisions: NormalPlayResX: 560PlayResY: 420Timer: 10.0000[V4+ Styles]Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, EncodingStyle: Fix,Microsoft YaHei UI,25,&amp;H66FFFFFF,&amp;H66FFFFFF,&amp;H66000000,&amp;H66000000,0,0,0,0,100,100,0,0,1,1,0,2,20,20,2,0Style: R2L,Microsoft YaHei UI,25,&amp;H66FFFFFF,&amp;H66FFFFFF,&amp;H66000000,&amp;H66000000,0,0,0,0,100,100,0,0,1,1,0,2,20,20,2,0[Events]Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text"""</span>    currentY = <span class="hljs-number">1</span> <span class="hljs-comment"># currentY * 25 -&gt; Y .. currentY = 1 -&gt; 16</span>    <span class="hljs-keyword">for</span> danmu <span class="hljs-keyword">in</span> danmu_list:        style = <span class="hljs-string">""</span>        startX = <span class="hljs-number">620</span> <span class="hljs-comment"># likely to be the average</span>        endX = -(startX - <span class="hljs-number">560</span>)        <span class="hljs-keyword">if</span> <span class="hljs-number">1</span> &lt;= danmu.mode <span class="hljs-keyword">and</span> danmu.mode &lt;= <span class="hljs-number">3</span>:            style = <span class="hljs-string">"R2L"</span>        <span class="hljs-keyword">else</span>:            style = <span class="hljs-string">"FIX"</span>            startX = <span class="hljs-number">280</span>            endX = <span class="hljs-number">280</span>        Y = currentY * <span class="hljs-number">25</span>        currentY += <span class="hljs-number">1</span>        <span class="hljs-keyword">if</span> currentY == <span class="hljs-number">17</span>:            currentY = <span class="hljs-number">1</span>        ass += <span class="hljs-string">"Dialogue: 0,%s,%s,%s,,20,20,2,,{\\move(%d,%d,%d,%d)%s}%s\n"</span> % (danmu.appear_time, danmu.disappear_time, style, startX, Y, endX, Y, danmu.color, danmu.text)    <span class="hljs-keyword">return</span> ass<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>:</span>    url = input(<span class="hljs-string">"url:"</span>)    cid = get_cid(url)    <span class="hljs-keyword">if</span> cid == <span class="hljs-string">"x"</span>:        print(<span class="hljs-string">"cid not found"</span>)        exit(<span class="hljs-number">1</span>)    danmu_url = <span class="hljs-string">"https://comment.bilibili.com/"</span> + cid + <span class="hljs-string">".xml"</span>    danmu_list = get_danmu_list(danmu_url)    ass = generate_ass(danmu_list)    <span class="hljs-keyword">with</span> open(cid + <span class="hljs-string">".ass"</span>, <span class="hljs-string">"wb+"</span>) <span class="hljs-keyword">as</span> ass_file:        ass_file.write(ass.encode(<span class="hljs-string">"utf-8"</span>))<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:    main()</code></pre><h3 id="ä½¿ç”¨æ–¹æ³•"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ–¹æ³•"></a> ä½¿ç”¨æ–¹æ³•</h3><pre class="highlight"><code class="shell">git clone https://github.com/DreamWalkerXZ/BilibiliDanmu2Ass.gitcd ./BilibiliDanmu2Asspython3 main.py # è¾“å…¥ä¸ºBç«™è§†é¢‘åœ°å€, è¾“å‡ºä¸ºè¯¥è§†é¢‘cid.asså­—å¹•æ–‡ä»¶(åœ¨å½“å‰ç›®å½•)</code></pre>]]></content>
    
    
    <categories>
      
      <category>æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Bilibili</tag>
      
      <tag>å­—å¹•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NOI-æ’åºç®—æ³•</title>
    <link href="/2019/05/26/NOI-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <url>/2019/05/26/NOI-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><p>æœ¬æ–‡å°†åˆ†äº«NOIä¸­å¸¸è§çš„å‡ ç§æ’åºç®—æ³•</p><blockquote><p>æœ¬æ–‡ä¸­ä½¿ç”¨çš„å®šä¹‰æ¥æºäºWikipediaã€‚<br />æœ¬æ–‡ä¸­ä½¿ç”¨çš„å›¾ç‰‡é™¤æœ€åä¸€å¼ æ¥æºäºcnblogsä¹‹å¤–ï¼Œå…¶ä»–å›¾ç‰‡å‡æ¥æºäºVisuAlgoã€‚<br />æœ¬æ–‡ä¸­çš„C++ä»£ç é™¤å½’å¹¶æ’åºå¤„å¼•ç”¨è‡ªWikipediaï¼Œå…¶ä»–çš„æ’åºçš„ä»£ç å‡ä¸ºæœ¬äººæ‰€å†™ã€‚</p></blockquote><h2 id="è°ƒç”¨algorithmè¿›è¡Œæ’åº"><a class="markdownIt-Anchor" href="#è°ƒç”¨algorithmè¿›è¡Œæ’åº"></a> ğŸ¤£è°ƒç”¨algorithmè¿›è¡Œæ’åº</h2><p>algorithmä¸­çš„std::sort()å‡½æ•°å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œæ’åºï¼Œå¦‚æœé¢˜ç›®æ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨æ­¤å‡½æ•°ã€‚</p><p>C++ä»£ç </p><pre class="highlight"><code class="c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-comment">/* your code ... */</span>sort(arr, arr + arr_len);<span class="hljs-comment">/* your code ... */</span></code></pre><h2 id="å†’æ³¡æ’åº"><a class="markdownIt-Anchor" href="#å†’æ³¡æ’åº"></a> ğŸ§¼å†’æ³¡æ’åº</h2><p>å†’æ³¡æ’åºï¼ˆè‹±è¯­ï¼šBubble Sortï¼‰æ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢ã€Œæµ®ã€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚</p><p><img src="https://i.loli.net/2019/06/29/5d16d824c545187370.gif" srcset="/img/loading.gif" alt="å†’æ³¡æ’åº.gif" /></p><p>C++ä»£ç </p><pre class="highlight"><code class="c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">10000</span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bubble_sort</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> len)</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = len - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">1</span>; i--)    {        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; i; j++)        {            <span class="hljs-keyword">if</span> (arr[j] &gt; arr[j + <span class="hljs-number">1</span>])            {                swap(arr[j], arr[j + <span class="hljs-number">1</span>]);            }        }    }}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">int</span> len;    <span class="hljs-built_in">cin</span> &gt;&gt; len;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)    {        <span class="hljs-built_in">cin</span> &gt;&gt; arr[i];    }    <span class="hljs-keyword">return</span> len;}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">output</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> len)</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)    {        <span class="hljs-built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">' '</span>;    }    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">int</span> arr[N], len;    len = input(arr);    bubble_sort(arr, len);    output(arr, len);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;}</code></pre><h2 id="é€‰æ‹©æ’åº"><a class="markdownIt-Anchor" href="#é€‰æ‹©æ’åº"></a> ğŸ‘†é€‰æ‹©æ’åº</h2><p>é€‰æ‹©æ’åºï¼ˆSelection sortï¼‰æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†å¦‚ä¸‹ã€‚é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åï¼Œå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚</p><p><img src="https://i.loli.net/2019/06/29/5d16d85e0784844278.gif" srcset="/img/loading.gif" alt="é€‰æ‹©æ’åº.gif" /></p><p>C++ä»£ç </p><pre class="highlight"><code class="c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">10000</span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">selection_sort</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> len)</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len - <span class="hljs-number">1</span>; i++)    {        <span class="hljs-keyword">int</span> <span class="hljs-built_in">min</span> = i;        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = i + <span class="hljs-number">1</span>; j &lt; len; j++)        {            <span class="hljs-keyword">if</span> (arr[j] &lt; arr[<span class="hljs-built_in">min</span>])            {                <span class="hljs-built_in">min</span> = j;            }        }        swap(arr[i], arr[<span class="hljs-built_in">min</span>]);    }}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">int</span> len;    <span class="hljs-built_in">cin</span> &gt;&gt; len;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)    {        <span class="hljs-built_in">cin</span> &gt;&gt; arr[i];    }    <span class="hljs-keyword">return</span> len;}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">output</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> len)</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)    {        <span class="hljs-built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">' '</span>;    }    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">int</span> arr[N], len;    len = input(arr);    selection_sort(arr, len);    output(arr, len);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;}</code></pre><h2 id="ï¸æ’å…¥æ’åº"><a class="markdownIt-Anchor" href="#ï¸æ’å…¥æ’åº"></a> ğŸ€„ï¸æ’å…¥æ’åº</h2><p>æ’å…¥æ’åºï¼ˆè‹±è¯­ï¼šInsertion Sortï¼‰æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚</p><p><img src="https://i.loli.net/2019/06/29/5d16ddc9b821858475.gif" srcset="/img/loading.gif" alt="æ’å…¥æ’åº.gif" /></p><p>C++ä»£ç </p><pre class="highlight"><code class="c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">10000</span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">insertion_sort</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> len)</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; len; i++)    {        <span class="hljs-keyword">int</span> key = arr[i];        <span class="hljs-keyword">int</span> j = i - <span class="hljs-number">1</span>;        <span class="hljs-keyword">while</span> ((j &gt;= <span class="hljs-number">0</span>) &amp;&amp; (key &lt; arr[j]))        {            arr[j + <span class="hljs-number">1</span>] = arr[j];            j--;        }        arr[j + <span class="hljs-number">1</span>] = key;    }}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">int</span> len;    <span class="hljs-built_in">cin</span> &gt;&gt; len;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)    {        <span class="hljs-built_in">cin</span> &gt;&gt; arr[i];    }    <span class="hljs-keyword">return</span> len;}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">output</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> len)</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)    {        <span class="hljs-built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">' '</span>;    }    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">int</span> arr[N], len;    len = input(arr);    insertion_sort(arr, len);    output(arr, len);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;}</code></pre><h2 id="æ¡¶æ’åº"><a class="markdownIt-Anchor" href="#æ¡¶æ’åº"></a> ğŸ“¦æ¡¶æ’åº</h2><p>æ¡¶æ’åºï¼ˆBucket sortï¼‰æˆ–æ‰€è°“çš„ç®±æ’åºï¼Œæ˜¯ä¸€ä¸ªæ’åºæ¼”ç®—æ³•ï¼Œå·¥ä½œçš„åŸç†æ˜¯å°†é˜µåˆ—åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œã€‚æ¯ä¸ªæ¡¶å†ä¸ªåˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºæ¼”ç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’åºï¼‰ã€‚</p><p><img src="https://i.loli.net/2019/07/06/5d20b1d191b6870108.gif" srcset="/img/loading.gif" alt="æ¡¶æ’åº.gif" /></p><p>C++ä»£ç </p><pre class="highlight"><code class="c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">10000</span>;<span class="hljs-keyword">int</span> bucket[N] = {};<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bucket_sort</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> bucket[], <span class="hljs-keyword">int</span> len)</span> </span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {        bucket[arr[i]]++;    }}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">int</span> len;    <span class="hljs-built_in">cin</span> &gt;&gt; len;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)    {        <span class="hljs-built_in">cin</span> &gt;&gt; arr[i];    }    <span class="hljs-keyword">return</span> len;}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">output</span><span class="hljs-params">(<span class="hljs-keyword">int</span> bucket[], <span class="hljs-keyword">int</span> len)</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)    {        <span class="hljs-keyword">while</span> (bucket[i]) {            <span class="hljs-built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">' '</span>;            bucket[i]--;        }    }    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">int</span> arr[N], bucket[N] = {}, len;    len = input(arr);    bucket_sort(arr, bucket, len);    output(bucket, len);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;}</code></pre><h2 id="å¿«é€Ÿæ’åº"><a class="markdownIt-Anchor" href="#å¿«é€Ÿæ’åº"></a> ğŸ‡å¿«é€Ÿæ’åº</h2><p>å¿«é€Ÿæ’åºï¼ˆè‹±è¯­ï¼šQuicksortï¼‰ï¼Œåˆç§°åˆ’åˆ†äº¤æ¢æ’åºï¼ˆpartition-exchange sortï¼‰ï¼Œç®€ç§°å¿«æ’ï¼Œä¸€ç§æ’åºç®—æ³•ï¼Œæœ€æ—©ç”±ä¸œå°¼Â·éœå°”æå‡ºã€‚åœ¨å¹³å‡çŠ¶å†µä¸‹ï¼Œæ’åºnä¸ªé¡¹ç›®è¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>æ¬¡æ¯”è¾ƒã€‚åœ¨æœ€åçŠ¶å†µä¸‹åˆ™éœ€è¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æ¬¡æ¯”è¾ƒï¼Œä½†è¿™ç§çŠ¶å†µå¹¶ä¸å¸¸è§ã€‚äº‹å®ä¸Šï¼Œå¿«é€Ÿæ’åº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>é€šå¸¸æ˜æ˜¾æ¯”å…¶ä»–æ¼”ç®—æ³•æ›´å¿«ï¼Œå› ä¸ºå®ƒçš„å†…éƒ¨å¾ªç¯ï¼ˆinner loopï¼‰å¯ä»¥åœ¨å¤§éƒ¨åˆ†çš„æ¶æ„ä¸Šå¾ˆæœ‰æ•ˆç‡åœ°è¾¾æˆã€‚</p><p><img src="https://i.loli.net/2019/07/13/5d29dac480e0296026.gif" srcset="/img/loading.gif" alt="å¿«é€Ÿæ’åº.gif" /></p><p>C++ä»£ç </p><pre class="highlight"><code class="c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">10000</span>;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">quick_sort</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> head, <span class="hljs-keyword">int</span> tail)</span></span>{    <span class="hljs-keyword">if</span> (head &gt;= tail)    {        <span class="hljs-keyword">return</span>;    }    <span class="hljs-keyword">int</span> i = head, j = tail;    <span class="hljs-keyword">int</span> pivot = arr[head];  <span class="hljs-comment">// é€šå¸¸å–ç¬¬ä¸€ä¸ªæ•°ä¸ºåŸºå‡†</span>    <span class="hljs-keyword">while</span> (i &lt; j) <span class="hljs-comment">// i,j ç›¸é‡å³é€€å‡ºå¾ªç¯</span>    {        <span class="hljs-keyword">while</span> (i &lt; j <span class="hljs-keyword">and</span> arr[j] &gt;= pivot) <span class="hljs-comment">// ä»å³å‘å·¦æ‰«æï¼Œå°†æ¯”åŸºå‡†å°çš„æ•°å¡«åˆ°å·¦è¾¹</span>        {            j--;        }        arr[i] = arr[j];        <span class="hljs-keyword">while</span> (i &lt; j <span class="hljs-keyword">and</span> arr[i] &lt;= pivot) <span class="hljs-comment">// ä»å·¦å‘å³æ‰«æï¼Œå°†æ¯”åŸºå‡†å¤§çš„æ•°å¡«åˆ°å³è¾¹</span>        {            i++;        }        arr[j] = arr[i];    }    arr[i] = pivot; <span class="hljs-comment">// å°†åŸºå‡†æ•°å¡«å›</span>    quick_sort(arr, head, i - <span class="hljs-number">1</span>); <span class="hljs-comment">// ä»¥åŸºå‡†æ•°ä¸ºç•Œå·¦å³åˆ†æ²»</span>    quick_sort(arr, j + <span class="hljs-number">1</span>, tail);}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[])</span></span>{    <span class="hljs-keyword">int</span> len;    <span class="hljs-built_in">cin</span> &gt;&gt; len;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)    {        <span class="hljs-built_in">cin</span> &gt;&gt; arr[i];    }    <span class="hljs-keyword">return</span> len;}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">output</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> len)</span></span>{    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)    {        <span class="hljs-built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">' '</span>;    }    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;}<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{    <span class="hljs-keyword">int</span> arr[N], len;    len = input(arr);    quick_sort(arr, <span class="hljs-number">0</span>, len - <span class="hljs-number">1</span>);    output(arr, len);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;}</code></pre><h2 id="å½’å¹¶æ’åºäºŒè·¯"><a class="markdownIt-Anchor" href="#å½’å¹¶æ’åºäºŒè·¯"></a> ğŸ›å½’å¹¶æ’åº(äºŒè·¯)</h2><p>å½’å¹¶æ’åºï¼ˆè‹±è¯­ï¼šMerge sortï¼Œæˆ–mergesortï¼‰ï¼Œæ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ï¼Œæ•ˆç‡ç‚º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>ã€‚1945å¹´ç”±çº¦ç¿°Â·å†¯Â·è¯ºä¼Šæ›¼é¦–æ¬¡æå‡ºã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ï¼Œä¸”å„å±‚åˆ†æ²»é€’å½’å¯ä»¥åŒæ—¶è¿›è¡Œã€‚</p><p><img src="https://i.loli.net/2019/07/24/5d387662c1f1f47165.png" srcset="/img/loading.gif" alt="å½’å¹¶æ’åº.png" /></p><pre class="highlight"><code class="c++"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Merge</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &amp;Array, <span class="hljs-keyword">int</span> front, <span class="hljs-keyword">int</span> mid, <span class="hljs-keyword">int</span> <span class="hljs-built_in">end</span>)</span> </span>{    <span class="hljs-comment">// preconditions:</span>    <span class="hljs-comment">// Array[front...mid] is sorted</span>    <span class="hljs-comment">// Array[mid+1 ... end] is sorted</span>    <span class="hljs-comment">// Copy Array[front ... mid] to LeftSubArray</span>    <span class="hljs-comment">// Copy Array[mid+1 ... end] to RightSubArray</span>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">LeftSubArray</span><span class="hljs-params">(Array.<span class="hljs-built_in">begin</span>() + front, Array.<span class="hljs-built_in">begin</span>() + mid + <span class="hljs-number">1</span>)</span></span>;    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">RightSubArray</span><span class="hljs-params">(Array.<span class="hljs-built_in">begin</span>() + mid + <span class="hljs-number">1</span>, Array.<span class="hljs-built_in">begin</span>() + <span class="hljs-built_in">end</span> + <span class="hljs-number">1</span>)</span></span>;    <span class="hljs-keyword">int</span> idxLeft = <span class="hljs-number">0</span>, idxRight = <span class="hljs-number">0</span>;    LeftSubArray.insert(LeftSubArray.<span class="hljs-built_in">end</span>(), numeric_limits&lt;<span class="hljs-keyword">int</span>&gt;::<span class="hljs-built_in">max</span>());    RightSubArray.insert(RightSubArray.<span class="hljs-built_in">end</span>(), numeric_limits&lt;<span class="hljs-keyword">int</span>&gt;::<span class="hljs-built_in">max</span>());    <span class="hljs-comment">// Pick min of LeftSubArray[idxLeft] and RightSubArray[idxRight], and put into Array[i]</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = front; i &lt;= <span class="hljs-built_in">end</span>; i++) {        <span class="hljs-keyword">if</span> (LeftSubArray[idxLeft] &lt; RightSubArray[idxRight]) {            Array[i] = LeftSubArray[idxLeft];            idxLeft++;        } <span class="hljs-keyword">else</span> {            Array[i] = RightSubArray[idxRight];            idxRight++;        }    }}<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">MergeSort</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &amp;Array, <span class="hljs-keyword">int</span> front, <span class="hljs-keyword">int</span> <span class="hljs-built_in">end</span>)</span> </span>{    <span class="hljs-keyword">if</span> (front &gt;= <span class="hljs-built_in">end</span>)        <span class="hljs-keyword">return</span>;    <span class="hljs-keyword">int</span> mid = front + (<span class="hljs-built_in">end</span> - front) / <span class="hljs-number">2</span>;    MergeSort(Array, front, mid);    MergeSort(Array, mid + <span class="hljs-number">1</span>, <span class="hljs-built_in">end</span>);    Merge(Array, front, mid, <span class="hljs-built_in">end</span>);}</code></pre><h2 id="æ¯”è¾ƒ"><a class="markdownIt-Anchor" href="#æ¯”è¾ƒ"></a> æ¯”è¾ƒ</h2><table><thead><tr><th>åç§°</th><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>ç©ºé—´å¤æ‚åº¦</th><th>ç¨³å®šæ€§</th></tr></thead><tbody><tr><td>å†’æ³¡æ’åº</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td>âœ”ï¸</td></tr><tr><td>é€‰æ‹©æ’åº</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td>âœ–ï¸</td></tr><tr><td>æ’å…¥æ’åº</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td>âœ”ï¸</td></tr><tr><td>æ¡¶æ’åº</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></td><td>âœ–ï¸</td></tr><tr><td>å¿«é€Ÿæ’åº</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></td><td>âœ–ï¸</td></tr><tr><td>å½’å¹¶æ’åº(äºŒè·¯)</td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></td><td>âœ”ï¸</td></tr></tbody></table><h2 id="é€‰æ‹©"><a class="markdownIt-Anchor" href="#é€‰æ‹©"></a> é€‰æ‹©</h2><p><img src="https://i.loli.net/2019/06/28/5d16281e44f2b75052.png" srcset="/img/loading.gif" alt="åœºæ™¯é€‰æ‹©.png" /></p>]]></content>
    
    
    <categories>
      
      <category>NOI</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ’åº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•™ç¨‹-é€šè¿‡ä¸€ä¸ªå°é¡¹ç›®å­¦ä¹ Docker</title>
    <link href="/2019/03/15/%E6%95%99%E7%A8%8B-%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0Docker/"/>
    <url>/2019/03/15/%E6%95%99%E7%A8%8B-%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0Docker/</url>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a class="markdownIt-Anchor" href="#ç®€ä»‹"></a> ç®€ä»‹</h2><p>æœ¬æ¬¡å°†é€šè¿‡ä¸€ä¸ªå°é¡¹ç›®&quot;OverWeb&quot;æ¥å­¦ä¹ DockeræŠ€æœ¯</p><blockquote><p>æœ¬é¡¹ç›®æœªç»å®‰å…¨æµ‹è¯•ï¼Œè¯·å‹¿ç›´æ¥éƒ¨ç½²äºå…¬å…±ç¯å¢ƒ</p></blockquote><p>é¡¹ç›®ä»‹ç»ï¼šåœ¨ç½‘é¡µä¸Šä½¿ç”¨åŸºäºDockerçš„VNCå®¹å™¨</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/DreamWalkerXZ/OverWeb" target="_blank" rel="noopener">ğŸš€GitHub</a></p><p>æˆå“å±•ç¤ºï¼š</p><iframe src="//player.bilibili.com/player.html?aid=46442672&cid=81370958&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%"></iframe><h2 id="ä»€ä¹ˆæ˜¯docker"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯docker"></a> ä»€ä¹ˆæ˜¯Docker</h2><h3 id="ç»´åŸºç™¾ç§‘"><a class="markdownIt-Anchor" href="#ç»´åŸºç™¾ç§‘"></a> ç»´åŸºç™¾ç§‘</h3><p>Dockeræ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç è½¯ä»¶é¡¹ç›®ï¼Œè®©åº”ç”¨ç¨‹åºéƒ¨ç½²åœ¨è½¯ä»¶è´§æŸœä¸‹çš„å·¥ä½œå¯ä»¥è‡ªåŠ¨åŒ–è¿›è¡Œï¼Œå€Ÿæ­¤åœ¨Linuxæ“ä½œç³»ç»Ÿä¸Šï¼Œæä¾›ä¸€ä¸ªé¢å¤–çš„è½¯ä»¶æŠ½è±¡å±‚ï¼Œä»¥åŠæ“ä½œç³»ç»Ÿå±‚è™šæ‹ŸåŒ–çš„è‡ªåŠ¨ç®¡ç†æœºåˆ¶ã€‚<br />Dockeråˆ©ç”¨Linuxæ ¸å¿ƒä¸­çš„èµ„æºåˆ†ç¦»æœºåˆ¶ï¼Œä¾‹å¦‚cgroupsï¼Œä»¥åŠLinuxæ ¸å¿ƒåå­—ç©ºé—´ï¼ˆnamespacesï¼‰ï¼Œæ¥åˆ›å»ºç‹¬ç«‹çš„å®¹å™¨ï¼ˆcontainersï¼‰ã€‚è¿™å¯ä»¥åœ¨å•ä¸€Linuxå®ä½“ä¸‹è¿ä½œï¼Œé¿å…å¼•å¯¼ä¸€ä¸ªè™šæ‹Ÿæœºé€ æˆçš„é¢å¤–è´Ÿæ‹…ã€‚Linuxæ ¸å¿ƒå¯¹åå­—ç©ºé—´çš„æ”¯æŒå®Œå…¨éš”ç¦»äº†å·¥ä½œç¯å¢ƒä¸­åº”ç”¨ç¨‹åºçš„è§†é‡ï¼ŒåŒ…æ‹¬è¿›ç¨‹æ ‘ã€ç½‘ç»œã€ç”¨æˆ·IDä¸æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ ¸å¿ƒçš„cgroupæä¾›èµ„æºéš”ç¦»ï¼ŒåŒ…æ‹¬CPUã€å­˜å‚¨å™¨ã€block I/Oä¸ç½‘ç»œã€‚ä»0.9ç‰ˆæœ¬èµ·ï¼ŒDockersåœ¨ä½¿ç”¨æŠ½è±¡è™šæ‹Ÿæ˜¯ç»ç”±libvirtçš„LXCä¸systemd - nspawnæä¾›ç•Œé¢çš„åŸºç¡€ä¸Šï¼Œå¼€å§‹åŒ…æ‹¬libcontaineråº“åšä¸ºä»¥è‡ªå·±çš„æ–¹å¼å¼€å§‹ç›´æ¥ä½¿ç”¨ç”±Linuxæ ¸å¿ƒæä¾›çš„è™šæ‹ŸåŒ–çš„è®¾æ–½ï¼Œ</p><h3 id="äººè¯"><a class="markdownIt-Anchor" href="#äººè¯"></a> äººè¯</h3><p>Dockeræ˜¯ä¸€ä¸ªä¸å®¿ä¸»ç³»ç»Ÿè¿æ¥æ›´åŠ ç›´æ¥çš„â€œè™šæ‹Ÿæœºâ€ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„è™šæ‹Ÿæœºå®ƒä¸éœ€è¦å†åŠ ä¸€å±‚å®¢æˆ·æ“ä½œç³»ç»Ÿæ¥å®ç°è™šæ‹ŸåŒ–ï¼Œè€Œæ˜¯é€šè¿‡linuxç³»ç»Ÿçš„èµ„æºåˆ†ç¦»æœºåˆ¶ç›´æ¥å®ç°è™šæ‹Ÿçš„ã€ä¸å®¿ä¸»éš”ç¦»çš„â€œå®¹å™¨â€ã€‚</p><p>å›¾ä¾‹ï¼ˆç¬¬ä¸€å¼ ä¸ºä¼ ç»Ÿè™šæ‹Ÿæœº,ç¬¬äºŒå¼ ä¸ºDockerï¼‰ï¼š</p><p><a href="https://i.loli.net/2019/03/15/5c8b9b8d99266.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/03/15/5c8b9b8d99266.png" srcset="/img/loading.gif" alt="virtualization.png" /></a><br /><a href="https://i.loli.net/2019/03/15/5c8b9b8d72016.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/03/15/5c8b9b8d72016.png" srcset="/img/loading.gif" alt="docker.png" /></a></p><h2 id="å®‰è£…docker"><a class="markdownIt-Anchor" href="#å®‰è£…docker"></a> å®‰è£…Docker</h2><blockquote><p>å®˜æ–¹ç½‘ç«™ä¸Šæœ‰å„ç§ç¯å¢ƒä¸‹çš„<a href="https://docs.docker.com/install/" target="_blank" rel="noopener">å®‰è£…æŒ‡å—</a>ï¼Œè¿™é‡Œä¸»è¦ä»‹ç» Docker CE åœ¨ Ubuntu ã€Windows 10 (PC) å’Œ macOS ä¸Šçš„å®‰è£…ã€‚</p></blockquote><h3 id="dockerçš„ç‰ˆæœ¬"><a class="markdownIt-Anchor" href="#dockerçš„ç‰ˆæœ¬"></a> Dockerçš„ç‰ˆæœ¬</h3><p>Docker åˆ†ä¸º CE å’Œ EE ä¸¤å¤§ç‰ˆæœ¬ã€‚CE å³ç¤¾åŒºç‰ˆï¼ˆå…è´¹ï¼Œæ”¯æŒå‘¨æœŸ 7 ä¸ªæœˆï¼‰ï¼ŒEE å³ä¼ä¸šç‰ˆï¼Œå¼ºè°ƒå®‰å…¨ï¼Œä»˜è´¹ä½¿ç”¨ï¼Œæ”¯æŒå‘¨æœŸ 24 ä¸ªæœˆã€‚</p><p>Docker CE åˆ†ä¸º stable, test, å’Œ nightly ä¸‰ä¸ªæ›´æ–°é¢‘é“ã€‚æ¯å…­ä¸ªæœˆå‘å¸ƒä¸€ä¸ª stable ç‰ˆæœ¬ (18.09, 19.03, 19.09â€¦)ã€‚</p><h3 id="ubuntu"><a class="markdownIt-Anchor" href="#ubuntu"></a> Ubuntu</h3><h4 id="ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…"><a class="markdownIt-Anchor" href="#ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…"></a> ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…</h4><p>åœ¨æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒä¸­ Docker å®˜æ–¹ä¸ºäº†ç®€åŒ–å®‰è£…æµç¨‹ï¼Œæä¾›äº†ä¸€å¥—ä¾¿æ·çš„å®‰è£…è„šæœ¬ï¼ŒUbuntu ç³»ç»Ÿä¸Šå¯ä»¥ä½¿ç”¨è¿™å¥—è„šæœ¬å®‰è£…ï¼š</p><pre class="highlight"><code class="bash">curl -fsSL get.docker.com -o get-docker.shsudo sh get-docker.sh <span class="hljs-comment"># å›½å†…ç”¨æˆ·å¯åŠ ä¸Š--mirror Aliyun</span>sudo usermod -aG docker ä½ çš„ç”¨æˆ·å<span class="hljs-comment"># é‡å¯ä½ çš„ç”µè„‘</span>docker run hello-world <span class="hljs-comment"># å®Œæˆ!</span></code></pre><h4 id="æ‰‹åŠ¨å®‰è£…"><a class="markdownIt-Anchor" href="#æ‰‹åŠ¨å®‰è£…"></a> æ‰‹åŠ¨å®‰è£…</h4><h5 id="åˆ é™¤æ—§ç‰ˆæœ¬"><a class="markdownIt-Anchor" href="#åˆ é™¤æ—§ç‰ˆæœ¬"></a> åˆ é™¤æ—§ç‰ˆæœ¬</h5><pre class="highlight"><code class="bash">sudo apt-get remove docker docker-engine docker.io containerd runc</code></pre><h5 id="è®¾ç½®å¥½repository"><a class="markdownIt-Anchor" href="#è®¾ç½®å¥½repository"></a> è®¾ç½®å¥½REPOSITORY</h5><pre class="highlight"><code class="bash">sudo apt-get updatesudo apt-get install \    apt-transport-https \    ca-certificates \    curl \    gnupg-agent \    software-properties-commoncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -sudo add-apt-repository \    <span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \    <span class="hljs-variable">$(lsb_release -cs)</span> \    stable"</span> <span class="hljs-comment"># archå¤„å¡«å†™ä½ è‡ªå·±çš„æ¶æ„</span>sudo apt-get updatesudo apt-get install docker-ce docker-ce-cli containerd.iosudo usermod -aG docker ä½ çš„ç”¨æˆ·å<span class="hljs-comment"># é‡å¯ä½ çš„ç”µè„‘</span>docker run hello-world <span class="hljs-comment"># å®Œæˆ!</span></code></pre><h3 id="windows-10-pc"><a class="markdownIt-Anchor" href="#windows-10-pc"></a> Windows 10 (PC)</h3><p><a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows" target="_blank" rel="noopener">ç‚¹æ­¤ä¸‹è½½Community Edition (CE) of Docker for Microsoft Windows</a></p><h3 id="macos"><a class="markdownIt-Anchor" href="#macos"></a> macOS</h3><p><a href="https://hub.docker.com/editions/community/docker-ce-desktop-mac" target="_blank" rel="noopener">ç‚¹æ­¤ä¸‹è½½Community Edition (CE) of Docker Desktop for Mac</a></p><h2 id="ä½¿ç”¨docker"><a class="markdownIt-Anchor" href="#ä½¿ç”¨docker"></a> ä½¿ç”¨Docker</h2><h3 id="è·å–é•œåƒ"><a class="markdownIt-Anchor" href="#è·å–é•œåƒ"></a> è·å–é•œåƒ</h3><p>Dockeræ ¹æ®ä¸€ä¸ªâ€œé•œåƒâ€æ¥ç”Ÿæˆä¸€ä¸ªå®¹å™¨ï¼Œè¿™äº›é•œåƒä¸€èˆ¬å¯ä»¥åœ¨<a href="https://hub.docker.com" target="_blank" rel="noopener">Docker Hub</a>ä¸Šæ‰¾åˆ°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†æ¥è·å–è¿™äº›é•œåƒ</p><pre class="highlight"><code class="bash">docker pull [é€‰é¡¹] [Dockerä»“åº“ åœ°å€[:ç«¯å£å·]/]é•œåƒå[:æ ‡ç­¾]</code></pre><p>å…·ä½“çš„é€‰é¡¹å¯ä»¥é€šè¿‡ docker pull --help å‘½ä»¤çœ‹åˆ°</p><p>Dockerä»“åº“ï¼šåœ°å€çš„æ ¼å¼ä¸€èˆ¬æ˜¯ &lt;åŸŸå/IP&gt;[:ç«¯å£å·]ã€‚é»˜è®¤åœ°å€æ˜¯ Docker Hubã€‚<br />é•œåƒåï¼šå¦‚ä¹‹å‰æ‰€è¯´ï¼Œè¿™é‡Œçš„ä»“åº“åæ˜¯ä¸¤æ®µå¼åç§°ï¼Œå³ &lt;ç”¨æˆ·å&gt;/&lt;é•œåƒå&gt;ã€‚å¯¹äº Docker Hubï¼Œå¦‚æœä¸ç»™å‡ºç”¨æˆ·åï¼Œåˆ™é»˜è®¤ä¸º libraryï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹é•œåƒã€‚</p><p>å®æ“</p><pre class="highlight"><code class="bash">docker pull ubuntu:18.04<span class="hljs-comment"># 18.04: Pulling from library/ubuntu</span><span class="hljs-comment"># bf5d46315322: Pull complete</span><span class="hljs-comment"># 9f13e0ac480c: Pull complete</span><span class="hljs-comment"># e8988b5b3097: Pull complete</span><span class="hljs-comment"># 40af181810e7: Pull complete</span><span class="hljs-comment"># e6f7c7e5c03e: Pull complete</span><span class="hljs-comment"># Digest: sha256:147913621d9cdea08853f6ba9116c2e27a3ceffecf3b492983ae97c3d643fbbe</span><span class="hljs-comment"># Status: Downloaded newer image for ubuntu:18.04</span></code></pre><h3 id="ä½¿ç”¨é•œåƒ-å®¹å™¨"><a class="markdownIt-Anchor" href="#ä½¿ç”¨é•œåƒ-å®¹å™¨"></a> ä½¿ç”¨é•œåƒ -&gt; å®¹å™¨</h3><p>ä¸»è¦å‘½ä»¤ docker run</p><pre class="highlight"><code class="bash">docker run ubuntu:18.04 /bin/<span class="hljs-built_in">echo</span> <span class="hljs-string">'Hello world'</span><span class="hljs-comment"># Hello world</span></code></pre><p>è¿™æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼š<br />1.Dockeræ ¹æ®ä½ ç»™å‡ºçš„é•œåƒåubuntu:18.04åˆ›å»ºå‡ºä¸€ä¸ªå®¹å™¨<br />2.Dockerå‘åˆšåˆšåˆ›å»ºçš„å®¹å™¨ä¼ å…¥ä½ è¾“å…¥çš„å‘½ä»¤/bin/echo â€˜Hello worldâ€™<br />3.Dockerå°†å®¹å™¨çš„è¾“å‡ºè¿”å›</p><h3 id="æ›´å¤šç”¨æ³•"><a class="markdownIt-Anchor" href="#æ›´å¤šç”¨æ³•"></a> æ›´å¤šç”¨æ³•</h3><p>Dockerçš„ç©æ³•å½“ç„¶è¿œä¸æ­¢è¿™äº›ï¼Œä¸è¿‡ç¯‡å¹…æ‰€é™ï¼ˆæ‡’ï¼‰ï¼Œç»™å¤§å®¶æ¨èä¸€ä¸ªDockeræ•™ç¨‹â€”â€”<a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">Docker â€”â€” ä»å…¥é—¨åˆ°å®è·µ</a></p><h2 id="dockerçš„å°å®è·µ-overweb"><a class="markdownIt-Anchor" href="#dockerçš„å°å®è·µ-overweb"></a> Dockerçš„å°å®è·µ -&gt; OverWeb</h2><h3 id="overwebç®€ä»‹"><a class="markdownIt-Anchor" href="#overwebç®€ä»‹"></a> OverWebç®€ä»‹</h3><p>åœ¨ç½‘é¡µä¸Šä½¿ç”¨åŸºäºDockerçš„VNCå®¹å™¨</p><h3 id="overwebçš„é€»è¾‘å›¾"><a class="markdownIt-Anchor" href="#overwebçš„é€»è¾‘å›¾"></a> OverWebçš„é€»è¾‘å›¾</h3><p><a href="https://i.loli.net/2019/03/15/5c8baeec90503.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/03/15/5c8baeec90503.png" srcset="/img/loading.gif" alt="OverWeb.png" /></a></p><h3 id="overwebçš„æ–‡ä»¶ç»“æ„"><a class="markdownIt-Anchor" href="#overwebçš„æ–‡ä»¶ç»“æ„"></a> OverWebçš„æ–‡ä»¶ç»“æ„</h3><pre class="highlight"><code class="bash">$ tree.â”œâ”€â”€ LICENSEâ”œâ”€â”€ README.mdâ”œâ”€â”€ main.pyâ”œâ”€â”€ staticâ”‚   â”œâ”€â”€ cssâ”‚   â”‚   â”œâ”€â”€ mdui.cssâ”‚   â”‚   â”œâ”€â”€ mdui.min.cssâ”‚   â”‚   â””â”€â”€ mdui.min.css.mapâ”‚   â”œâ”€â”€ fontsâ”‚   â”‚   â””â”€â”€ robotoâ”‚   â”‚       â”œâ”€â”€ LICENSE.txtâ”‚   â”‚       â”œâ”€â”€ Roboto-Black.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-Black.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-BlackItalic.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-BlackItalic.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-Bold.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-Bold.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-BoldItalic.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-BoldItalic.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-Light.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-Light.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-LightItalic.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-LightItalic.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-Medium.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-Medium.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-MediumItalic.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-MediumItalic.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-Regular.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-Regular.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-RegularItalic.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-RegularItalic.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-Thin.woffâ”‚   â”‚       â”œâ”€â”€ Roboto-Thin.woff2â”‚   â”‚       â”œâ”€â”€ Roboto-ThinItalic.woffâ”‚   â”‚       â””â”€â”€ Roboto-ThinItalic.woff2â”‚   â”œâ”€â”€ iconsâ”‚   â”‚   â”œâ”€â”€ favicon.icoâ”‚   â”‚   â””â”€â”€ material-iconsâ”‚   â”‚       â”œâ”€â”€ LICENSE.txtâ”‚   â”‚       â”œâ”€â”€ MaterialIcons-Regular.ijmapâ”‚   â”‚       â”œâ”€â”€ MaterialIcons-Regular.woffâ”‚   â”‚       â””â”€â”€ MaterialIcons-Regular.woff2â”‚   â””â”€â”€ jsâ”‚       â”œâ”€â”€ mdui.jsâ”‚       â”œâ”€â”€ mdui.min.jsâ”‚       â””â”€â”€ mdui.min.js.mapâ””â”€â”€ templates    â”œâ”€â”€ about.html    â”œâ”€â”€ go.html    â””â”€â”€ index.html8 directories, 42 files</code></pre><h3 id="å®‰è£…è¿è¡Œ"><a class="markdownIt-Anchor" href="#å®‰è£…è¿è¡Œ"></a> å®‰è£…&amp;è¿è¡Œ</h3><pre class="highlight"><code class="bash"><span class="hljs-comment"># éœ€è¦Dockerä»¥åŠPython3ç¯å¢ƒ</span>git <span class="hljs-built_in">clone</span> https://github.com/DreamWalkerXZ/OverWeb.git<span class="hljs-built_in">cd</span> ./OverWebdocker pull consol/ubuntu-icewm-vncpip3 install flask --userpython3 main.py</code></pre><h3 id="å…³é”®éƒ¨åˆ†"><a class="markdownIt-Anchor" href="#å…³é”®éƒ¨åˆ†"></a> å…³é”®éƒ¨åˆ†</h3><pre class="highlight"><code class="python">os.system(<span class="hljs-string">'docker run -d -p %d:6901 -e VNC_PW=%s -e VNC_RESOLUTION=720x720 --name %s consol/ubuntu-icewm-vnc chromium-browser https://www.google.com/'</span> % (port, password, name))</code></pre><p>-på‚æ•°(ç”¨äºç«¯å£æ˜ å°„) -p æ˜ å°„è‡³å®¿ä¸»æœºçš„ç«¯å£:å®¹å™¨å†…è¦æ˜ å°„çš„ç«¯å£</p><p>-eå‚æ•°(ç”¨äºè®¾ç½®å®¹å™¨å†…çš„ç¯å¢ƒå˜é‡) -e ENV1=VALUE1 ENV2=VALUE2</p><p>â€“nameå‚æ•°(ç”¨äºä¸ºå®¹å™¨å‘½å) --name NAME</p><h3 id="mainpy"><a class="markdownIt-Anchor" href="#mainpy"></a> <a href="https://www.github.com" target="_blank" rel="noopener">main.py</a></h3><pre class="highlight"><code class="python"><span class="hljs-keyword">import</span> os<span class="hljs-keyword">import</span> time<span class="hljs-keyword">import</span> uuid<span class="hljs-keyword">import</span> random<span class="hljs-keyword">import</span> threading<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template, url_forapp = Flask(__name__)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">expireContainer</span><span class="hljs-params">(name)</span>:</span>    print(<span class="hljs-string">'%s will be removed in 10 minutes'</span> % (name))    time.sleep(<span class="hljs-number">10</span>*<span class="hljs-number">60</span>)    print(<span class="hljs-string">'Stopping %s'</span> % (name))    os.system(<span class="hljs-string">'docker stop %s'</span> % (name))    print(<span class="hljs-string">'Removing %s'</span> % (name))    os.system(<span class="hljs-string">'docker rm %s'</span> % (name))<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createTmpContainer</span><span class="hljs-params">(port, password, name)</span>:</span>    print(<span class="hljs-string">'Creating %s'</span> % (name))    os.system(<span class="hljs-string">'docker run -d -p %d:6901 -e VNC_PW=%s -e VNC_RESOLUTION=720x720 --name %s consol/ubuntu-icewm-vnc chromium-browser https://www.google.com/'</span> % (port, password, name))    threading.Thread(target=expireContainer, args=(name,)).start()<span class="hljs-meta">@app.route('/')</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span><span class="hljs-params">()</span>:</span>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">'index.html'</span>)<span class="hljs-meta">@app.route('/go')</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">go</span><span class="hljs-params">()</span>:</span>    port = <span class="hljs-number">10000</span> + random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">50000</span>)    password = str(uuid.uuid4())    name = str(uuid.uuid4())    createTmpContainer(port, password, name)    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">'go.html'</span>, link=<span class="hljs-string">'http://localhost:%d/?password=%s'</span> % (port, password))<span class="hljs-meta">@app.route('/about')</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">about</span><span class="hljs-params">()</span>:</span>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">'about.html'</span>)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>:</span>    app.run(host=<span class="hljs-string">'127.0.0.1'</span>, port=<span class="hljs-number">8080</span>, debug=<span class="hljs-literal">True</span>)<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:    main()</code></pre>]]></content>
    
    
    <categories>
      
      <category>æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•™ç¨‹-æœç´¢&amp;è§£æQQéŸ³ä¹çš„æ— æŸå“è´¨éŸ³æº</title>
    <link href="/2018/12/08/%E6%95%99%E7%A8%8B-%E6%90%9C%E7%B4%A2&amp;%E8%A7%A3%E6%9E%90QQ%E9%9F%B3%E4%B9%90%E6%97%A0%E6%8D%9F%E5%93%81%E8%B4%A8/"/>
    <url>/2018/12/08/%E6%95%99%E7%A8%8B-%E6%90%9C%E7%B4%A2&amp;%E8%A7%A3%E6%9E%90QQ%E9%9F%B3%E4%B9%90%E6%97%A0%E6%8D%9F%E5%93%81%E8%B4%A8/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ç›®å‰è§£æåŠŸèƒ½å·²ç»ä¸å¯ç”¨ï¼Œæœç´¢åŠŸèƒ½æ­£å¸¸<br />é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/DreamWalkerXZ/QQ_music_direct_link_export" target="_blank" rel="noopener">ğŸš€GitHub</a></p></blockquote><h2 id="1è·å–æ•°æ®"><a class="markdownIt-Anchor" href="#1è·å–æ•°æ®"></a> 1.è·å–æ•°æ®</h2><pre class="highlight"><code class="python">keyword = <span class="hljs-string">'æå¥'</span>search_api = <span class="hljs-string">'http://c.y.qq.com/soso/fcgi-bin/client_search_cp?ct=24&amp;qqmusic_ver=1298&amp;new_json=1&amp;remoteplace=txt.yqq.center&amp;t=0&amp;aggr=1&amp;cr=1&amp;catZhida=1&amp;lossless=0&amp;flag_qc=0&amp;p=1&amp;n=50&amp;w='</span> + keyword + <span class="hljs-string">'&amp;jsonpCallback=searchCallbacksong2020&amp;format=json&amp;inCharset=utf8&amp;outCharset=utf-8&amp;notice=0&amp;platform=yqq&amp;needNewCode=0'</span>response = requests.get(search_api).text</code></pre><p><img src="https://s1.ax1x.com/2018/11/10/iqlW9I.png" srcset="/img/loading.gif" alt="æœç´¢æ•°æ®" /></p><p>å³æ­Œæ›²å°±åœ¨json.loads(response)[â€˜dataâ€™][â€˜songâ€™][â€˜listâ€™]ä¸­</p><h2 id="2åˆ†ææ•°æ®"><a class="markdownIt-Anchor" href="#2åˆ†ææ•°æ®"></a> 2.åˆ†ææ•°æ®</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè§£æåçš„urlï¼š</p><pre class="highlight"><code class="python"><span class="hljs-string">'http://streamoc.music.tc.qq.com/M800000PLHrM2luXiz.mp3?vkey=CA23BC73FA35144644BAD2C8E3026425F724AD8AA117AD079FB5812177575B59044EF642A3B422F3A9E7FEFF185839FC163444AD015BB875&amp;guid=DreamWalkerXZ&amp;uin=123456&amp;fromtag=8'</span></code></pre><p>ç„¶åæŠŠå®ƒçš„å‚æ•°ç»™åˆ†ç¦»å‡ºæ¥</p><pre class="highlight"><code class="python"><span class="hljs-string">'http://streamoc.music.tc.qq.com/'</span> + prefix + mid + extension + <span class="hljs-string">'?vkey='</span> + vkey + <span class="hljs-string">'&amp;guid='</span> + guid + <span class="hljs-string">'&amp;uin='</span> + uin + <span class="hljs-string">'&amp;fromtag=8'</span></code></pre><h3 id="prefixä¸extension"><a class="markdownIt-Anchor" href="#prefixä¸extension"></a> prefixä¸extension</h3><p>prefixæ˜¯éŸ³é¢‘æ ¼å¼çš„å‰ç¼€ï¼Œ ä¸extensionç›¸å¯¹åº”</p><table><thead><tr><th>quality</th><th>prefix</th><th>extension</th></tr></thead><tbody><tr><td>dts</td><td>D00A</td><td>.flac</td></tr><tr><td>ape</td><td>A000</td><td>.ape</td></tr><tr><td>flac</td><td>F000</td><td>.flac</td></tr><tr><td>320</td><td>M800</td><td>.mp3</td></tr><tr><td>aac</td><td>C600</td><td>.m4a</td></tr><tr><td>ogg</td><td>O600</td><td>.ogg</td></tr><tr><td>128</td><td>M500</td><td>.mp3</td></tr></tbody></table><p>è‡³äºå¦‚ä½•åˆ¤æ–­æ˜¯å¦æœ‰æ­¤å“è´¨ï¼Œåªéœ€è¦åœ¨ç¬¬ä¸€æ­¥çš„æœç´¢ç»“æœä¸­çš„json.loads(response)[â€˜dataâ€™][â€˜songâ€™][â€˜listâ€™][æ­Œæ›²ä½ç½®][â€˜fileâ€™]ä¸­åˆ¤æ–­size_128, size_320, size_aac, size_ape, size_dts, size_flac, size_oggè¿™å‡ ä¸ªé¡¹çš„å€¼æ˜¯å¦ä¸º0å³å¯ï¼ˆä¸º0åˆ™ä»£è¡¨æ— æ­¤å“è´¨ï¼‰</p><h3 id="mid"><a class="markdownIt-Anchor" href="#mid"></a> mid</h3><p>midæ˜¯QQéŸ³ä¹ä¸­æ¯ä¸€é¦–æ­Œæ›²çš„å”¯ä¸€æ ‡è¯†ç¬¦</p><p>midå³json.loads(response)[â€˜dataâ€™][â€˜songâ€™][â€˜listâ€™][æ­Œæ›²ä½ç½®][â€˜midâ€™]çš„å€¼</p><h3 id="uinä¸guid"><a class="markdownIt-Anchor" href="#uinä¸guid"></a> uinä¸guid</h3><p>guidå’Œuinéšæ„å¡«å……å³å¯, ä½†æ˜¯è¦ä¸åé¢ç”Ÿæˆvkeyæ—¶æ‰€å¡«çš„ä¸€è‡´</p><h3 id="vkey"><a class="markdownIt-Anchor" href="#vkey"></a> vkey</h3><p>vkeyæ˜¯ä¸€ä¸ªé€šè¿‡ç®—æ³•ç”Ÿæˆçš„å…·æœ‰æ—¶æ•ˆæ€§çš„å­—ç¬¦ä¸²</p><p>ç”Ÿæˆç®—æ³•å¦‚ä¸‹ï¼š</p><pre class="highlight"><code class="python">vkey = json.loads(requests.get(<span class="hljs-string">'http://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg?g_tk=0&amp;loginUin='</span> + uin + <span class="hljs-string">'&amp;hostUin=0&amp;format=json&amp;inCharset=utf8&amp;outCharset=utf-8&amp;notice=0&amp;platform=yqq&amp;needNewCode=0&amp;cid=205361747&amp;uin='</span> + uin + <span class="hljs-string">'&amp;songmid=003a1tne1nSz1Y&amp;filename=C400003a1tne1nSz1Y.m4a&amp;guid='</span> + guid).text)[<span class="hljs-string">'data'</span>][<span class="hljs-string">'items'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'vkey'</span>]<span class="hljs-comment"># 1.æ³¨æ„uinä¸guidåœ¨ç”Ÿæˆvkeyå’Œæ‹¼æ¥ç›´é“¾æ—¶è¦ä¸€è‡´</span><span class="hljs-comment"># 2.å¦‚æœæœåŠ¡å™¨åœ¨å›½å¤–ï¼Œè¯·ä½¿ç”¨å›½å†…çš„HTTPä»£ç†æ¥è®¿é—®æ­¤æ¥å£ï¼Œå¦åˆ™ä¼šå› ä¸ºç‰ˆæƒé—®é¢˜æ— æ³•è§£æ</span></code></pre><h2 id="æˆå“"><a class="markdownIt-Anchor" href="#æˆå“"></a> æˆå“</h2><blockquote><p><a href="http://QQ.py" target="_blank" rel="noopener">QQ.py</a> ï¼ˆç±»ï¼‰</p></blockquote><pre class="highlight"><code class="python"><span class="hljs-keyword">import</span> json<span class="hljs-keyword">import</span> requests<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QQ</span><span class="hljs-params">()</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search</span><span class="hljs-params">(self, song_name)</span>:</span>        search_url = <span class="hljs-string">'http://c.y.qq.com/soso/fcgi-bin/client_search_cp?ct=24&amp;qqmusic_ver=1298&amp;new_json=1&amp;remoteplace=txt.yqq.center&amp;t=0&amp;aggr=1&amp;cr=1&amp;catZhida=1&amp;lossless=0&amp;flag_qc=0&amp;p=1&amp;n=50&amp;w='</span> + song_name + <span class="hljs-string">'&amp;jsonpCallback=searchCallbacksong2020&amp;format=json&amp;inCharset=utf8&amp;outCharset=utf-8&amp;notice=0&amp;platform=yqq&amp;needNewCode=0'</span>        search_result = []        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> json.loads(requests.get(search_url).text)[<span class="hljs-string">'data'</span>][<span class="hljs-string">'song'</span>][<span class="hljs-string">'list'</span>]:            name = item[<span class="hljs-string">'name'</span>]            singer = <span class="hljs-string">''</span>.join(singer[<span class="hljs-string">'name'</span>] + <span class="hljs-string">'+'</span> <span class="hljs-keyword">for</span> singer <span class="hljs-keyword">in</span> item[<span class="hljs-string">'singer'</span>]).rstrip(<span class="hljs-string">'+'</span>)            album = item[<span class="hljs-string">'album'</span>][<span class="hljs-string">'name'</span>]            media_mid = item[<span class="hljs-string">'file'</span>][<span class="hljs-string">'media_mid'</span>]            types = []            <span class="hljs-keyword">if</span> item[<span class="hljs-string">'file'</span>][<span class="hljs-string">'size_128'</span>] != <span class="hljs-number">0</span>:                types.append(<span class="hljs-string">'128'</span>)            <span class="hljs-keyword">if</span> item[<span class="hljs-string">'file'</span>][<span class="hljs-string">'size_320'</span>] != <span class="hljs-number">0</span>:                types.append(<span class="hljs-string">'320'</span>)            <span class="hljs-keyword">if</span> item[<span class="hljs-string">'file'</span>][<span class="hljs-string">'size_aac'</span>] != <span class="hljs-number">0</span>:                types.append(<span class="hljs-string">'aac'</span>)            <span class="hljs-keyword">if</span> item[<span class="hljs-string">'file'</span>][<span class="hljs-string">'size_ape'</span>] != <span class="hljs-number">0</span>:                types.append(<span class="hljs-string">'ape'</span>)            <span class="hljs-keyword">if</span> item[<span class="hljs-string">'file'</span>][<span class="hljs-string">'size_dts'</span>] != <span class="hljs-number">0</span>:                types.append(<span class="hljs-string">'dts'</span>)            <span class="hljs-keyword">if</span> item[<span class="hljs-string">'file'</span>][<span class="hljs-string">'size_flac'</span>] != <span class="hljs-number">0</span>:                types.append(<span class="hljs-string">'flac'</span>)            <span class="hljs-keyword">if</span> item[<span class="hljs-string">'file'</span>][<span class="hljs-string">'size_ogg'</span>] != <span class="hljs-number">0</span>:                types.append(<span class="hljs-string">'ogg'</span>)            search_result.append({<span class="hljs-string">'name'</span>: name, <span class="hljs-string">'singer'</span>: singer, <span class="hljs-string">'album'</span>: album, <span class="hljs-string">'media_mid'</span>: media_mid, <span class="hljs-string">'types'</span>: types})        <span class="hljs-keyword">return</span> search_result    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_audio_url</span><span class="hljs-params">(self, media_mid, type)</span>:</span>        <span class="hljs-keyword">if</span> type == <span class="hljs-string">'dts'</span>:            type = {<span class="hljs-string">'prefix'</span>: <span class="hljs-string">'D00A'</span>, <span class="hljs-string">'extension'</span>: <span class="hljs-string">'.flac'</span>}        <span class="hljs-keyword">elif</span> type == <span class="hljs-string">'ape'</span>:            type = {<span class="hljs-string">'prefix'</span>: <span class="hljs-string">'A000'</span>, <span class="hljs-string">'extension'</span>: <span class="hljs-string">'.ape'</span>}        <span class="hljs-keyword">elif</span> type == <span class="hljs-string">'flac'</span>:            type = {<span class="hljs-string">'prefix'</span>: <span class="hljs-string">'F000'</span>, <span class="hljs-string">'extension'</span>: <span class="hljs-string">'.flac'</span>}        <span class="hljs-keyword">elif</span> type == <span class="hljs-string">'320'</span>:            type = {<span class="hljs-string">'prefix'</span>: <span class="hljs-string">'M800'</span>, <span class="hljs-string">'extension'</span>: <span class="hljs-string">'.mp3'</span>}        <span class="hljs-keyword">elif</span> type == <span class="hljs-string">'aac'</span>:            type = {<span class="hljs-string">'prefix'</span>: <span class="hljs-string">'C600'</span>, <span class="hljs-string">'extension'</span>: <span class="hljs-string">'.m4a'</span>}        <span class="hljs-keyword">elif</span> type == <span class="hljs-string">'ogg'</span>:            type = {<span class="hljs-string">'prefix'</span>: <span class="hljs-string">'O600'</span>, <span class="hljs-string">'extension'</span>: <span class="hljs-string">'.ogg'</span>}        <span class="hljs-keyword">elif</span> type == <span class="hljs-string">'128'</span>:            type = {<span class="hljs-string">'prefix'</span>: <span class="hljs-string">'M500'</span>, <span class="hljs-string">'extension'</span>: <span class="hljs-string">'.mp3'</span>}        <span class="hljs-keyword">else</span>:            <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"Invalid type"</span>, type)        uin = <span class="hljs-string">'123456'</span>        guid = <span class="hljs-string">'DreamWalkerXZ'</span>        vkey = json.loads(requests.get(<span class="hljs-string">'http://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg?g_tk=0&amp;loginUin='</span> + uin + <span class="hljs-string">'&amp;hostUin=0&amp;format=json&amp;inCharset=utf8&amp;outCharset=utf-8&amp;notice=0&amp;platform=yqq&amp;needNewCode=0&amp;cid=205361747&amp;uin='</span> + uin + <span class="hljs-string">'&amp;songmid=003a1tne1nSz1Y&amp;filename=C400003a1tne1nSz1Y.m4a&amp;guid='</span> + guid).text)[<span class="hljs-string">'data'</span>][<span class="hljs-string">'items'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'vkey'</span>]        <span class="hljs-keyword">return</span> <span class="hljs-string">'http://streamoc.music.tc.qq.com/'</span> + type[<span class="hljs-string">'prefix'</span>] + media_mid + type[<span class="hljs-string">'extension'</span>] + <span class="hljs-string">'?vkey='</span> + vkey + <span class="hljs-string">'&amp;guid='</span> + guid + <span class="hljs-string">'&amp;uin='</span> + uin + <span class="hljs-string">'&amp;fromtag=8'</span></code></pre><blockquote><p>è°ƒç”¨ç¤ºä¾‹</p></blockquote><pre class="highlight"><code class="python"><span class="hljs-keyword">import</span> QQqq = QQ.QQ()<span class="hljs-comment"># æœç´¢</span>search_result = qq.search(<span class="hljs-string">'æå¥'</span>)print(search_result)<span class="hljs-comment">###</span>[{<span class="hljs-string">'name'</span>: <span class="hljs-string">'è´åŠ å°”æ¹–ç•”'</span>,  <span class="hljs-string">'singer'</span>: <span class="hljs-string">'æå¥'</span>,  <span class="hljs-string">'album'</span>: <span class="hljs-string">'ä¾ç„¶'</span>,  <span class="hljs-string">'media_mid'</span>: <span class="hljs-string">'000PLHrM2luXiz'</span>,  <span class="hljs-string">'types'</span>: [<span class="hljs-string">'128'</span>, <span class="hljs-string">'320'</span>, <span class="hljs-string">'aac'</span>, <span class="hljs-string">'ape'</span>, <span class="hljs-string">'flac'</span>, <span class="hljs-string">'ogg'</span>]}, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'å‡å¦‚çˆ±æœ‰å¤©æ„'</span>,  <span class="hljs-string">'singer'</span>: <span class="hljs-string">'æå¥'</span>,  <span class="hljs-string">'album'</span>: <span class="hljs-string">'æå¥'</span>,  <span class="hljs-string">'media_mid'</span>: <span class="hljs-string">'003u0BdF1aocDJ'</span>,  <span class="hljs-string">'types'</span>: [<span class="hljs-string">'128'</span>, <span class="hljs-string">'320'</span>, <span class="hljs-string">'aac'</span>, <span class="hljs-string">'flac'</span>, <span class="hljs-string">'ogg'</span>]}, ...ä¸­é—´çœç•¥... {<span class="hljs-string">'name'</span>: <span class="hljs-string">'æ—¥è½ä¹‹å‰'</span>,  <span class="hljs-string">'singer'</span>: <span class="hljs-string">'æå¥'</span>,  <span class="hljs-string">'album'</span>: <span class="hljs-string">'æå¥'</span>,  <span class="hljs-string">'media_mid'</span>: <span class="hljs-string">'0047DwLA1u9FEx'</span>,  <span class="hljs-string">'types'</span>: [<span class="hljs-string">'128'</span>, <span class="hljs-string">'320'</span>, <span class="hljs-string">'aac'</span>, <span class="hljs-string">'ape'</span>, <span class="hljs-string">'dts'</span>, <span class="hljs-string">'flac'</span>, <span class="hljs-string">'ogg'</span>]}]<span class="hljs-comment">###</span><span class="hljs-comment"># è§£æ</span>audio_url = qq.get_audio_url(<span class="hljs-string">'001Liwq92gKerW'</span>, <span class="hljs-string">'320'</span>)print(audio_url)<span class="hljs-comment">###</span>http://streamoc.music.tc.qq.com/M800001Liwq92gKerW.mp3?vkey=<span class="hljs-number">17E517</span>E90215EB25F6DD717CE479C6E9573EB9505EA633F4909A32725B490ACDF5A934BB8674363A90C8C076104C2412E6FCADCF58FB5DC0&amp;guid=DreamWalkerXZ&amp;uin=<span class="hljs-number">123456</span>&amp;fromtag=<span class="hljs-number">8</span><span class="hljs-comment">###</span></code></pre>]]></content>
    
    
    <categories>
      
      <category>æ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>QQéŸ³ä¹</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
